(this["webpackJsonptimer-app"]=this["webpackJsonptimer-app"]||[]).push([[0],{25:function(e,t,n){e.exports=n(54)},30:function(e,t,n){},31:function(e,t,n){},53:function(e,t,n){e.exports=n.p+"static/media/Rubik-Bold.9a6fb6f5.ttf"},54:function(e,t,n){"use strict";n.r(t);var a,o=n(0),s=n.n(o),i=n(5),r=n.n(i),c=(n(30),n(31),n(10)),u=n.n(c),m=n(11),l=n(20),d=Object(m.a)({joinDate:Date.now(),connections:0,ready:!1,time:6e5,startAmount:6e5,endTime:Date.now()+6e5,status:"idle",tick:function(){d.time=Math.max(0,d.endTime-Date.now())},play:function(){d.status="running",d.endTime=Date.now()+d.time,d.shareState()},pause:function(){d.status="paused",d.shareState()},reset:function(){d.status="idle",d.endTime=Date.now()+d.startAmount,d.time=d.startAmount,d.shareState()},addTime:function(e){d.endTime=d.endTime+e,d.time=d.time+e,d.shareState()},setState:function(e){d.ready=!1,d.time=e.time,d.startAmount=e.startAmount,d.endTime=e.endTime,d.status=e.status},requestToJoin:function(e){a.send(e,{type:"ask",joinDate:d.joinDate})},acceptRequest:function(e){var t={time:d.time,startAmount:d.startAmount,endTime:d.endTime,status:d.status};a.send(e,{type:"accept",state:t})},shareState:function(){if(d.ready){var e={time:d.time,startAmount:d.startAmount,endTime:d.endTime,status:d.status};console.log("sharing new state to all"),a.send({type:"share",state:e})}}});if(window.location.hash)a=new u.a("Sm34sQyBLqcM"+window.location.hash.substr(1));else{var f=l.hri.random();window.location.hash=f,a=u()("Sm34sQyBLqcM"+f),d.ready=!0}a.on("connections",(function(e){d.connections=e})),a.on("message",(function(e,t){var n=t.type,o=t.state,s=t.joinDate;e!==a.address()&&("ask"===n?d.ready?(console.log(e,"asks to join, accepting"),d.acceptRequest(e)):s>d.joinDate?(console.log(e,"asks to join, conflict, but they were here before, so ignoring"),d.ready=!0):(console.log(e,"asks to join, conflict, but we were here before, so accepting"),d.acceptRequest(e),d.ready=!0):"accept"!==n||d.ready?"share"===n&&d.ready&&(console.log("received new state from",e,"syncing"),d.setState(o),d.ready=!0):(console.log(e,"accepted request to join"),d.setState(o),d.ready=!0))})),a.on("seen",(function(e){console.log("seen:",e),d.ready||d.requestToJoin(e)})),setInterval((function(){"running"===d.status&&d.tick()}),100);var p=Object(m.b)((function(){return s.a.createElement("div",{className:"App"},s.a.createElement("div",{className:"container"},s.a.createElement("main",{className:"running"===d.status?"paused":"",onClick:function(){"running"===d.status?d.pause():d.play()}},s.a.createElement("span",{className:"time"},function(e){var t=Math.floor(e/1e3)%60,n=Math.floor(e/6e4)%60,a=Math.floor(e/36e5),o=[String(t).padStart(2,"0")];return n&&o.unshift(String(n).padStart(2,"0")),a&&o.unshift(String(a).padStart(2,"0")),o.join(":")}(d.time)),s.a.createElement("span",{className:"status_sign"})),s.a.createElement("p",null,"Connections: ",d.connections)))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(53);r.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(p,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[25,1,2]]]);
//# sourceMappingURL=main.2dc04600.chunk.js.map